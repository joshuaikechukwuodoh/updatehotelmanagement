hotel-management/
├─ app/
│  └─ api/
│     ├─ auth/
│     │  ├─ signup/route.js
│     │  ├─ login/route.js
│     │  ├─ logout/route.js
│     │  └─ me/route.js
│     │
│     ├─ rooms/
│     │  ├─ route.js                 // GET list, POST create
│     │  └─ [id]/
│     │     └─ route.js              // GET one, PATCH update
│     │
│     ├─ room-types/
│     │  ├─ route.js                 // GET list, POST create
│     │  └─ [id]/
│     │     └─ route.js              // PATCH update
│     │
│     ├─ guests/
│     │  ├─ route.js                 // GET list, POST create
│     │  └─ [id]/
│     │     └─ route.js              // GET guest + booking history
│     │
│     ├─ bookings/
│     │  ├─ route.js                 // GET list, POST create (overlap check)
│     │  └─ [id]/
│     │     ├─ route.js              // GET, PATCH
│     │     ├─ cancel/route.js
│     │     ├─ check-in/route.js
│     │     └─ check-out/route.js
│     │
│     ├─ availability/
│     │  └─ route.js                 // GET available rooms
│     │
│     ├─ housekeeping/
│     │  └─ tasks/
│     │     ├─ route.js              // GET tasks, POST create
│     │     └─ [id]/
│     │        └─ route.js           // PATCH task
│     │
│     ├─ payments/
│     │  ├─ route.js                 // GET payments, POST create
│     │  └─ [bookingId]/
│     │     └─ invoice/route.js      // GET invoice
│     │
│     ├─ agent-payments/
│     │  ├─ route.js                 // GET agent's commissions / finance view
│     │  └─ [bookingId]/
│     │     └─ pay/route.js          // POST pay agent commission
│     │
│     └─ reports/
│        ├─ occupancy/route.js
│        ├─ revenue/route.js
│        └─ daily/route.js
│
├─ lib/
│  ├─ auth.js                       // Better Auth instance + helpers
│  ├─ db.js                         // drizzle db + pg pool export
│  ├─ roles.js                      // role constants and helpers (ADMIN, RECEPTION, AGENT, HOUSEKEEPING, FINANCE)
│  └─ auth-helpers.js               // requireAuth(req), requireRole(req, role), getUserFromRequest(req)
│
├─ services/
│  ├─ booking-service.js            // booking logic + advisory lock + overlap check
│  ├─ room-service.js               // room CRUD logic
│  ├─ payment-service.js            // payments, invoices, agent payments
│  └─ housekeeping-service.js       // create/assign/update tasks
│
├─ db/
│  └─ schema.js                     // drizzle table definitions (users, bookings, rooms, etc.)
│
├─ scripts/
│  └─ init-db.js                    // create tables (dev helper)
│
├─ middleware.js                     // optional global middleware (auth redirects)
├─ .env
├─ package.json
└─ README.md
